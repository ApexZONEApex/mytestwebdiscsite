<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModernChat - Современный мессенджер</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Боковая панель серверов -->
        <div class="servers-sidebar">
            <div class="server-icon home active">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"/>
                </svg>
            </div>
            <div class="server-divider"></div>
            <div class="server-icon">
                <span>G</span>
            </div>
            <div class="server-icon">
                <span>D</span>
            </div>
            <div class="server-icon">
                <span>M</span>
            </div>
            <div class="server-icon add-server">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
                </svg>
            </div>
        </div>

        <!-- Панель каналов -->
        <div class="channels-sidebar">
            <div class="server-header">
                <h2>Мой Сервер</h2>
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 10l5 5 5-5z"/>
                </svg>
            </div>
            
            <div class="channels-list">
                <div class="channel-category">
                    <div class="category-header">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                        </svg>
                        <span>ТЕКСТОВЫЕ КАНАЛЫ</span>
                    </div>
                    <div class="channel active" data-channel="общий">
                        <span class="channel-icon">#</span>
                        <span>общий</span>
                    </div>
                    <div class="channel" data-channel="разработка">
                        <span class="channel-icon">#</span>
                        <span>разработка</span>
                    </div>
                    <div class="channel" data-channel="дизайн">
                        <span class="channel-icon">#</span>
                        <span>дизайн</span>
                    </div>
                    <div class="channel" data-channel="мемы">
                        <span class="channel-icon">#</span>
                        <span>мемы</span>
                    </div>
                </div>

                <div class="channel-category">
                    <div class="category-header">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                        </svg>
                        <span>ГОЛОСОВЫЕ КАНАЛЫ</span>
                    </div>
                    <div class="channel voice" data-voice="general">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        </svg>
                        <span>Общая комната</span>
                    </div>
                    <div class="channel voice" data-voice="gaming">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        </svg>
                        <span>Игровая</span>
                    </div>
                    <div class="channel voice" data-voice="music">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        </svg>
                        <span>Музыкальная</span>
                    </div>
                </div>
            </div>

            <div class="user-panel">
                <div class="user-info" id="userInfo" style="cursor: pointer;" onclick="window.location.href='profile.html'">
                    <div class="user-avatar">
                        <img id="currentUserAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=User" alt="Avatar">
                        <div class="status-indicator online" id="currentUserStatus"></div>
                    </div>
                    <div class="user-details">
                        <div class="username" id="currentUsername">Пользователь</div>
                        <div class="user-tag" id="currentUserTag">#1234</div>
                    </div>
                </div>
                <div class="user-controls">
                    <button class="control-btn" id="micBtn" title="Микрофон">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="headphonesBtn" title="Наушники">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 1c-4.97 0-9 4.03-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7c0-4.97-4.03-9-9-9z"/>
                        </svg>
                    </button>
                    <button class="control-btn" title="Настройки" onclick="window.location.href='profile.html'">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Основной чат -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="channel-info">
                    <span class="channel-icon">#</span>
                    <h3>общий</h3>
                </div>
                <div class="header-controls">
                    <button class="header-btn" title="Поиск">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                        </svg>
                    </button>
                    <button class="header-btn" title="Участники">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="messages-container" id="messagesContainer">
                <!-- Сообщения будут добавляться динамически -->
            </div>

            <div class="message-input-container">
                <button class="input-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                </button>
                <input type="text" class="message-input" placeholder="Написать сообщение в #общий" id="messageInput">
                <button class="input-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Панель участников -->
        <div class="members-sidebar" id="membersSidebar">
            <div class="members-section" id="onlineMembers">
                <div class="members-header">ОНЛАЙН — <span id="onlineCount">0</span></div>
            </div>
            <div class="members-section" id="offlineMembers">
                <div class="members-header">ОФФЛАЙН — <span id="offlineCount">0</span></div>
            </div>
        </div>
    </div>

    <!-- Компактная панель голосового чата (как в Discord) -->
    <div id="voicePanel" class="voice-panel-bottom hidden">
        <div class="voice-panel-info">
            <div class="voice-channel-badge">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                </svg>
                <div>
                    <span class="voice-channel-label">Голосовой канал</span>
                    <span class="voice-channel-name" id="voicePanelChannelName">Общая комната</span>
                </div>
            </div>
            <button class="voice-panel-expand" id="expandVoicePanel" title="Развернуть">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                </svg>
            </button>
        </div>
        
        <div class="voice-panel-controls">
            <button class="voice-panel-btn" id="panelToggleMic" title="Микрофон">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                </svg>
            </button>
            <button class="voice-panel-btn" id="panelToggleCamera" title="Камера">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
                </svg>
            </button>
            <button class="voice-panel-btn" id="panelToggleScreen" title="Демонстрация экрана">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/>
                </svg>
            </button>
            <button class="voice-panel-btn disconnect" id="panelDisconnect" title="Отключиться">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Развернутое окно голосового чата -->
    <div id="voiceModal" class="voice-modal hidden">
        <div class="voice-modal-content">
            <div class="voice-modal-header">
                <div class="voice-modal-title">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                    </svg>
                    <span id="voiceChannelName">Голосовой канал</span>
                </div>
                <button class="voice-modal-close" id="closeVoiceModal" title="Свернуть">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13H5v-2h14v2z"/>
                    </svg>
                </button>
            </div>

            <div class="voice-participants" id="voiceParticipants">
                <!-- Участники голосового чата -->
            </div>

            <div class="voice-controls">
                <button class="voice-control-btn" id="toggleMic" title="Микрофон">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                    </svg>
                </button>
                <button class="voice-control-btn" id="toggleCamera" title="Камера">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
                    </svg>
                </button>
                <button class="voice-control-btn" id="toggleScreen" title="Демонстрация экрана">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z"/>
                    </svg>
                </button>
                <button class="voice-control-btn disconnect" id="modalDisconnect" title="Отключиться">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.66 1.85-.18.18-.43.28-.7.28-.28 0-.53-.11-.71-.29L.29 13.08c-.18-.17-.29-.42-.29-.7 0-.28.11-.53.29-.71C3.34 8.78 7.46 7 12 7s8.66 1.78 11.71 4.67c.18.18.29.43.29.71 0 .28-.11.53-.29.71l-2.48 2.48c-.18.18-.43.29-.71.29-.27 0-.52-.11-.7-.28-.79-.74-1.68-1.36-2.66-1.85-.33-.16-.56-.5-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script src="api.js"></script>
    <script src="script.js"></script>
</body>
</html>